<div
  class="min-h-screen flex flex-col bg-gradient-to-br from-blue-800 via-blue-600 to-blue-400 text-white font-sans"
>
  <!-- Header -->
  <header
    class="flex items-center justify-between px-6 py-4 shadow-lg bg-white/15 backdrop-blur-md"
  >
    <div class="flex items-center">
      <h1 class="text-3xl font-bold tracking-wide">
        Kobo Document Scanner
        <span
          class="ml-2 text-sm font-medium bg-blue-500/30 text-blue-100 px-2 py-1 rounded-full"
          >v1.2.5 (build 220)</span
        >
      </h1>
    </div>
    <div class="flex items-center space-x-3">
      <!-- Theme Toggle Button -->
      <button
        mat-icon-button
        (click)="toggleTheme()"
        [attr.aria-label]="
          'Switch to ' + (isDarkTheme ? 'light' : 'dark') + ' mode'
        "
        class="focus:ring-2 focus:ring-blue-400 focus:outline-none flex items-center justify-center w-10 h-10 rounded-lg hover:bg-white/20 transition-all duration-200 active:scale-95"
      >
        <mat-icon class="h-6 w-6">
          {{ isDarkTheme ? "brightness_7" : "brightness_4" }}
        </mat-icon>
      </button>

      <!-- Help Button -->
      <button
        mat-button
        (click)="showInfo()"
        aria-label="Show Help Information"
        class="focus:ring-2 focus:ring-blue-400 focus:outline-none flex items-center justify-center px-4 py-1 rounded-lg bg-white/10 hover:bg-white/20 transition-all duration-200 active:scale-95"
      >
        <mat-icon class="h-5 w-5 mr-2">help_outline</mat-icon>
        <span class="leading-none">Help</span>
      </button>
    </div>
  </header>

  <!-- Main Content -->
  <main class="flex-1 flex flex-col items-center justify-center px-4 py-8">
    <div
      class="w-full max-w-2xl bg-white/90 dark:bg-gray-800/90 text-gray-800 dark:text-gray-100 rounded-2xl shadow-2xl p-8 transition-all duration-300"
    >
      <h2 class="text-2xl font-semibold mb-8 text-center">
        Select Document Type
      </h2>

      <!-- Document Selection List -->
      <nav role="list" class="space-y-4">
        <!-- Row 1 -->
        <button
          (click)="onScanMultiSideClick()"
          [disabled]="isLoading"
          class="w-full text-left px-4 py-3 flex items-start hover:bg-white/20 focus:ring-2 focus:ring-blue-400 focus:outline-none rounded-lg transition-all duration-200"
          aria-describedby="por-desc"
        >
          <mat-icon class="h-6 w-6 mr-4 mt-1">document_scanner</mat-icon>
          <div>
            <div class="text-xl font-semibold">Identity Card</div>
            <div id="por-desc" class="text-sm text-gray-600 dark:text-gray-300">
              Proof of Registration, eTazkira, etc.
            </div>
          </div>
        </button>

        <!-- Row 2 -->
        <button
          (click)="onScanSingleSideClick()"
          [disabled]="isLoading"
          class="w-full text-left px-4 py-3 flex items-start hover:bg-white/20 focus:ring-2 focus:ring-blue-400 focus:outline-none rounded-lg transition-all duration-200"
          aria-describedby="tazkira-desc"
        >
          <mat-icon class="h-6 w-6 mr-4 mt-1">document_scanner</mat-icon>
          <div>
            <div class="text-xl font-semibold">Passports</div>
            <div
              id="tazkira-desc"
              class="text-sm text-gray-600 dark:text-gray-300"
            >
              All National Passports
            </div>
          </div>
        </button>
      </nav>

      <!-- Row 3 -->
      <button
        disabled
        class="w-full text-left px-4 py-3 flex items-start cursor-not-allowed rounded-lg transition-all duration-200 opacity-70"
        aria-describedby="acc-desc"
      >
        <mat-icon class="h-6 w-6 mr-4 mt-1">document_scanner</mat-icon>
        <div>
          <div class="text-xl font-semibold">ACC Card</div>
          <div id="acc-desc" class="text-sm text-gray-400">Coming soon</div>
        </div>
      </button>

      <div
        *ngIf="errorMessage"
        class="bg-red-500 text-white p-4 rounded-lg mt-4"
      >
        {{ errorMessage }}
      </div>

      <!-- Scan Results -->
      <div
        *ngIf="scanResults"
        class="mt-8 animate-[fade-in_0.3s_ease-out,slide-up_0.3s_ease-out]"
        aria-live="polite"
      >
        <div class="bg-gray-100 dark:bg-gray-700 rounded-xl p-6 shadow-inner">
          <div class="flex items-center mb-4">
            <div
              class="flex items-center justify-center h-6 w-6 text-green-600 mr-2"
            >
              <svg
                class="w-full h-full"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                />
              </svg>
            </div>
            <h3 class="text-lg font-semibold">Scan Results</h3>
          </div>
          <div
            class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-600 max-h-40 overflow-y-auto"
          >
            <pre class="whitespace-pre-wrap text-sm font-mono">{{
              scanResults
            }}</pre>
          </div>
          <!-- Results Actions -->
          <div class="flex justify-end mt-4 space-x-3">
            <button
              mat-button
              class="text-sm flex items-center text-gray-600 dark:text-gray-300 px-3 py-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-200"
            >
              <mat-icon class="h-5 w-5 mr-1">content_copy</mat-icon>
              <span>Copy</span>
            </button>
            <button
              mat-button
              class="text-sm flex items-center text-gray-600 dark:text-gray-300 px-3 py-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-200"
            >
              <mat-icon class="h-5 w-5 mr-1">save_alt</mat-icon>
              <span>Save</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Status Bar -->
  <footer
    class="py-4 px-6 bg-black/10 backdrop-blur-sm text-sm flex justify-between items-center"
  >
    <div>Status: <span class="font-medium text-green-400">Ready</span></div>
    <div class="flex items-center">
      <mat-icon class="h-4 w-4 mr-1 text-blue-300">wifi</mat-icon>
      <span class="text-blue-300">Connected to Kobo Server</span>
    </div>
  </footer>

  <!-- Loading Overlay -->
  <div
    *ngIf="isLoading"
    class="fixed inset-0 flex flex-col items-center justify-center bg-gray-900/60 backdrop-blur-sm z-50"
    aria-live="polite"
  >
    <div class="h-12 w-12 animate-pulse">
      <mat-spinner diameter="48"></mat-spinner>
    </div>
    <p class="mt-4 text-white font-medium">Processing document...</p>
  </div>
</div>

<!-- INLINE HELP POPUP -->
<div
  *ngIf="isInfoOpen"
  class="fixed inset-0 z-[999] flex items-center justify-center bg-black/70 backdrop-blur-sm"
>
  <div
    class="relative bg-white text-gray-700 rounded-lg p-6 w-full max-w-md mx-4"
  >
    <!-- Close Button -->
    <button
      class="absolute top-2 right-2 text-gray-400 hover:text-gray-700 p-1 rounded-full hover:bg-gray-200 transition-all duration-200"
      (click)="closeInfo()"
      aria-label="Close help popup"
    >
      <mat-icon class="h-6 w-6">close</mat-icon>
    </button>

    <h2 class="text-xl font-bold mb-4 text-gray-900">Information</h2>

    <h4 class="mt-4 font-semibold">Support Information</h4>
    <p class="text-gray-600 mb-4">
      The Kobo Document Scanner app is primarily supported by the Information
      Management (IM) unit in Kabul. For any issues or inquiries regarding the
      app, please reach out to the IM unit. They are dedicated to providing
      comprehensive support and ensuring that your experience with the Kobo
      Document Scanner is seamless and efficient.
    </p>

    <h4 class="mt-4 font-semibold">Development Credit</h4>
    <p class="text-gray-600 mb-4">
      The Kobo Document Scanner is developed by the RBAP DIMA team in Bangkok.
      The DIMA team has put in extensive effort to create a reliable and
      user-friendly application that integrates smoothly with the KoboCollect
      app. We are committed to continuous improvement and welcome any feedback
      to enhance the app's functionality and user experience.
    </p>

    <h4 class="mt-4 font-semibold">Open Source Information</h4>
    <p class="text-gray-600 mb-4">
      The Kobo Document Scanner is an open-source project. You can find the
      source code and contribute to its development on GitHub. We encourage
      collaboration and contributions from the community to make the app even
      better. Visit our GitHub repository at
      <a
        class="text-blue-500 hover:underline"
        href="https://github.com/nawaaugustine/Kobo-Document-Scanner"
        target="_blank"
        >GitHub Repository</a
      >
      to explore the code, report issues, and participate in the development
      process.
    </p>

    <button
      mat-button
      class="w-full bg-blue-500 text-white px-4 py-2 rounded-lg transition-all duration-200"
      (click)="closeInfo()"
    >
      Close
    </button>
  </div>
</div>

<style>
  @keyframes slide-up {
    from {
      transform: translateY(10px);
    }
    to {
      transform: translateY(0);
    }
  }
</style>
